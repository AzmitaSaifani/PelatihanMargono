<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Gallery - MediTrust Bootstrap Template</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Favicons -->
    <link
      rel="icon"
      href="/pelatihanmargono/backend/uploads/foto/LogoWeb.png"
      type="image/png"
      sizes="512x512"
    />
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />

    <!-- Vendor CSS Files -->
    <link
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
    <link
      href="assets/vendor/fontawesome-free/css/all.min.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />
    <link
      href="assets/vendor/glightbox/css/glightbox.min.css"
      rel="stylesheet"
    />

    <!-- Main CSS File -->
    <link href="assets/css/main.css" rel="stylesheet" />
  </head>

  <body class="gallery-page">
    <header id="header" class="header d-flex align-items-center fixed-top">
      <div
        class="header-container container-fluid container-xl position-relative d-flex align-items-center justify-content-between"
      >
        <a
          href="index.html"
          class="logo d-flex align-items-center me-auto me-xl-0"
        >
          <!-- Uncomment the line below if you also wish to use an image logo -->
          <!-- <img src="assets/img/logo.webp" alt=""> -->

          <img
            src="/pelatihanmargono/backend/uploads/foto/LogoWeb.png"
            alt="Logo RSMS"
            style="height: 40px; margin-right: 8px"
          />

          <h1 class="sitename">DIKLAT RSMS</h1>
        </a>

        <nav id="navmenu" class="navmenu">
          <ul>
            <li><a href="index.html">Home</a></li>

            <li class="dropdown">
              <a href="#">
                <span>Pelatihan</span>
                <i class="bi bi-chevron-down toggle-dropdown"></i>
              </a>
              <ul>
                <li><a href="menupelatihan.html">Menu Pelatihan</a></li>
                <li><a href="kalender.html">Kalender Pelatihan</a></li>
                <li><a href="daftarpelatihan.html">Daftar Pelatihan</a></li>
                <li><a href="alurpendaftaran.html">Alur Pendaftaran</a></li>
                <li><a href="gallery.html" class="active">Gallery</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="#">
                <span>Tim & Mitra Pelatihan</span>
                <i class="bi bi-chevron-down toggle-dropdown"></i>
              </a>
              <ul>
                <li>
                  <a href="fasilitator.html">
                    Profesional Fasilitor dan Instuktur Tersertifikasi
                  </a>
                </li>
                <!-- <li>
                <a href="instruktur.html">Instuktur Tersertifikasi</a>
              </li> -->
                <li>
                  <a href="penyelenggara.html">
                    Tim Penyelenggara Pelatihan Tersertifikasi
                  </a>
                </li>
                <li><a href="intitusi.html">Institusi Kerjasama</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="#">
                <span>Tentang Kami</span>
                <i class="bi bi-chevron-down toggle-dropdown"></i>
              </a>
              <ul>
                <li><a href="profil.html">Profil Diklat</a></li>
                <li>
                  <a href="struktur_organisasi.html">Struktur Organisasi</a>
                </li>
                <li><a href="contact.html">Kontak</a></li>
              </ul>
            </li>

            <li><a href="kritiksaran.html">Kritik Saran</a></li>

            <li class="ms-lg-3">
              <a href="daftarpelatihan.html" class="btn btn-accent nav-cta">
                Daftar Pelatihan
              </a>
            </li>
          </ul>

          <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
        </nav>
      </div>
    </header>

    <main class="main">
      <!-- Page Title -->
      <div class="page-title">
        <div class="breadcrumbs"></div>

        <div class="title-wrapper">
          <h1>GALLERY</h1>
          <!-- <p>Berikut ini adalah beberapa dokumentasi dari pelatihan: </p> -->
        </div>
      </div>
      <!-- End Page Title -->

      <!-- ================= FILTER TABS ================= -->
      <section class="services section mt-0">
        <div class="container" data-aos="fade-up">
          <div class="services-tabs">
            <ul
              class="nav nav-tabs justify-content-center mb-4"
              id="galleryTabs"
            >
              <li class="nav-item">
                <button
                  class="nav-link active"
                  onclick="filterGallery('all', this)"
                >
                  Semua
                </button>
              </li>

              <li class="nav-item">
                <button
                  class="nav-link"
                  onclick="filterGallery('diskusi', this)"
                >
                  Diskusi
                </button>
              </li>

              <li class="nav-item">
                <button
                  class="nav-link"
                  onclick="filterGallery('sarpras', this)"
                >
                  Sarana Prasarana
                </button>
              </li>

              <li class="nav-item">
                <button
                  class="nav-link"
                  onclick="filterGallery('pelatihan', this)"
                >
                  Pelatihan
                </button>
              </li>
            </ul>
          </div>
        </div>
      </section>

      <!-- ================= GALLERY CONTENT ================= -->
      <!-- <section class="gallery section"> -->
        <div class="container mb-4" data-aos="fade-up">
          <div class="isotope-layout">
            <div class="row g-4 isotope-container" id="galleryContainer">
              <!-- ITEM GALLERY DARI JS -->
            </div>
          </div>
        </div>
      <!-- </section> -->
      <!-- /Gallery Section -->

      <script>
        const API_GALLERY = "http://localhost:5000/api/gallery";
        let isoInstance = null;

        // ===================== TAB ACTIVE =====================
        function setActiveGalleryTab(button) {
          document
            .querySelectorAll("#galleryTabs .nav-link")
            .forEach((tab) => tab.classList.remove("active"));

          if (button) button.classList.add("active");
        }

        // ===================== FILTER =====================
        function filterGallery(kategori, button) {
          setActiveGalleryTab(button);

          if (!isoInstance) return;

          if (kategori === "all") {
            isoInstance.arrange({ filter: "*" });
          } else {
            isoInstance.arrange({ filter: `.filter-${kategori}` });
          }
        }

        // ===================== LOAD GALLERY =====================
        async function loadGallery() {
          const container = document.getElementById("galleryContainer");
          container.innerHTML = "";

          try {
            const res = await fetch(API_GALLERY);
            const data = await res.json();

            allGallery = data;
            renderGallery(allGallery);
          } catch (err) {
            console.error("Gagal load gallery:", err);
            container.innerHTML = `
              <div class="col-12 text-center py-5">
                <h5 class="text-danger">
                  Gagal memuat gallery. Silakan coba lagi.
                </h5>
              </div>
            `;
          }
        }
        // ===================== RENDER ITEM =====================
        function renderGallery(list) {
          const container = document.getElementById("galleryContainer");
          container.innerHTML = "";

          if (list.length === 0) {
            container.innerHTML = `
              <div class="col-12 text-center py-5">
                <h5 class="text-muted">
                  Tidak ada gallery pada kategori ini untuk ditampilkan.
                </h5>
              </div>
            `;
            return;
          }

          list.forEach((item) => {
            container.innerHTML += `
              <div class="col-lg-4 col-md-6 gallery-item isotope-item filter-${
                item.kategori
              }">

                <div class="gallery-card">

                  <div class="gallery-img">

                    <!-- Klik untuk zoom -->
                    <a href="http://localhost:5000/uploads/gallery/${item.foto}"
                       class="glightbox"
                       data-gallery="gallery-images">
                      <img src="http://localhost:5000/uploads/gallery/${
                        item.foto
                      }"
                           class="img-fluid"
                           style="cursor: zoom-in;"
                           alt="Gallery Image">
                    </a>

                    <h5 class="simple-gallery-title mt-2">
                      ${item.keterangan || ""}
                    </h5>

                  </div>

                </div>

              </div>
            `;
          });

          imagesLoaded(container, function () {
            if (isoInstance) isoInstance.destroy();

            isoInstance = new Isotope(container, {
              itemSelector: ".isotope-item",
              layoutMode: "masonry",
            });
          });

          GLightbox({ selector: ".glightbox" });
        }

        // ===================== FILTER GALLERY =====================
        function filterGallery(kategori, button) {
          setActiveGalleryTab(button);

          if (kategori === "all") {
            renderGallery(allGallery);
          } else {
            const hasil = allGallery.filter(
              (item) => item.kategori === kategori
            );
            renderGallery(hasil);
          }
        }

        document.addEventListener("DOMContentLoaded", loadGallery);
      </script>

      <!-- Modal ZOOM Foto -->
      <div id="zoomFlyerModal" class="zoom-modal">
        <div class="zoom-modal-content">
          <span class="zoom-close" onclick="closeZoom()">&times;</span>
          <img id="zoomFlyerImage" class="zoom-image" />
        </div>
      </div>
      <!-- Modal ZOOM Foto -->
    </main>

    <footer id="footer" class="footer position-relative light-background">
      <div class="container footer-top">
        <div class="row gy-4">
          <div class="col-lg-4 col-md-6 footer-about">
            <a href="index.html" class="logo d-flex align-items-center">
              <span class="sitename">DIKLAT RSMS</span>
            </a>

            <div class="footer-contact pt-3">
              <p>Jl. Dr. Gumbreg No.1, Kebontebu, Berkoh,</p>
              <p>Kec. Purwokerto Sel., Kabupaten Banyumas,</p>
              <p>Jawa Tengah 53146</p>
              <p class="mt-3">
                <strong>Phone:</strong> <span>(0281) 632704</span>
              </p>
              <p>
                <strong>Email:</strong> <span>rsmargono@jatengprov.go.id</span>
              </p>
            </div>

            <div class="social-links d-flex mt-4">
              <a href="https://x.com/rsudmargono"
                ><i class="bi bi-twitter-x"></i
              ></a>
              <a href="https://www.facebook.com/RSMargono/"
                ><i class="bi bi-facebook"></i
              ></a>
              <a href="https://www.instagram.com/rsudmargono"
                ><i class="bi bi-instagram"></i
              ></a>
              <a href="https://www.youtube.com/@rsmargono"
                ><i class="bi bi-youtube"></i
              ></a>
            </div>
          </div>

          <div class="col-lg-2 col-md-3 footer-links">
            <h4>Useful Links</h4>
            <ul>
              <li><a href="index.html">Home</a></li>
              <li><a href="contact.html">Kontak</a></li>
              <li><a href="gallery.html">Gallery</a></li>
            </ul>
          </div>

          <div class="col-lg-2 col-md-3 footer-links">
            <h4>Pelatihan</h4>
            <ul>
              <li><a href="menupelatihan.html">Menu Pelatihan</a></li>
              <li><a href="daftarpelatihan.html">Daftar Pelatihan</a></li>
              <li><a href="kalender.html">Kalender Pelatihan</a></li>
              <li><a href="alurpendaftaran.html">Alur Pendaftaran</a></li>
            </ul>
          </div>

          <div class="col-lg-4 col-md-3 footer-links">
            <h4>Tim & Mitra Pelatihan</h4>
            <ul>
              <li>
                <a href="fasilitator.html"
                  >Profesional Fasilitor dan Instruktur</a
                >
              </li>
              <li>
                <a href="penyelenggara.html">Tim Penyelenggara Pelatihan</a>
              </li>
              <li><a href="instruktur.html">Institusi Kerjasama</a></li>
            </ul>
          </div>
        </div>
      </div>

      <div class="container copyright text-center mt-4">
        <p>
          Â© <span>Copyright</span>
          <strong class="px-1 sitename">RSUD Prof. Dr. Margono Soekarjo</strong>
        </p>
      </div>
    </footer>

    <!-- Scroll Top -->
    <a
      href="#"
      id="scroll-top"
      class="scroll-top d-flex align-items-center justify-content-center"
    >
      <i class="bi bi-arrow-up-short"></i>
    </a>

    <!-- Preloader -->
    <div id="preloader"></div>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/php-email-form/validate.js"></script>
    <script src="assets/vendor/aos/aos.js"></script>
    <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
    <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>

    <!-- Main JS File -->
    <script src="assets/js/main.js"></script>
  </body>
</html>

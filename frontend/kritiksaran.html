<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Kritik dan Saran - DIKLAT RSMS</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link rel="icon" href="/pelatihanmargono/backend/uploads/foto/LogoWeb.png" type="image/png" sizes="512x512">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: MediTrust
  * Template URL: https://bootstrapmade.com/meditrust-bootstrap-hospital-website-template/
  * Updated: Jul 04 2025 with Bootstrap v5.3.7
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body class="appointment-page">

  <header id="header" class="header d-flex align-items-center fixed-top">
      <div
        class="header-container container-fluid container-xl position-relative d-flex align-items-center justify-content-between"
      >
        <a
          href="index.html"
          class="logo d-flex align-items-center me-auto me-xl-0"
        >
          <!-- Uncomment the line below if you also wish to use an image logo -->
          <!-- <img src="assets/img/logo.webp" alt=""> -->
          
          <img src="/pelatihanmargono/backend/uploads/foto/LogoWeb.png" 
              alt="Logo RSMS" 
              style="height: 40px; margin-right: 8px;">


            <g id="bgCarrier" stroke-width="0"></g>
            <g
              id="tracerCarrier"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></g>
            <g id="iconCarrier">
              <path
                d="M22 22L2 22"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
              ></path>
              <path
                d="M17 22V6C17 4.11438 17 3.17157 16.4142 2.58579C15.8284 2 14.8856 2 13 2H11C9.11438 2 8.17157 2 7.58579 2.58579C7 3.17157 7 4.11438 7 6V22"
                stroke="currentColor"
                stroke-width="1.5"
              ></path>
              <path
                opacity="0.5"
                d="M21 22V8.5C21 7.09554 21 6.39331 20.6629 5.88886C20.517 5.67048 20.3295 5.48298 20.1111 5.33706C19.6067 5 18.9045 5 17.5 5"
                stroke="currentColor"
                stroke-width="1.5"
              ></path>
              <path
                opacity="0.5"
                d="M3 22V8.5C3 7.09554 3 6.39331 3.33706 5.88886C3.48298 5.67048 3.67048 5.48298 3.88886 5.33706C4.39331 5 5.09554 5 6.5 5"
                stroke="currentColor"
                stroke-width="1.5"
              ></path>
              <path
                d="M12 22V19"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
              ></path>
              <path
                opacity="0.5"
                d="M10 12H14"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
              ></path>
              <path
                opacity="0.5"
                d="M5.5 11H7"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
              ></path>
              <path
                opacity="0.5"
                d="M5.5 14H7"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
              ></path>
              <path
                opacity="0.5"
                d="M17 11H18.5"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
              ></path>
              <path
                opacity="0.5"
                d="M17 14H18.5"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
              ></path>
              <path
                opacity="0.5"
                d="M5.5 8H7"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
              ></path>
              <path
                opacity="0.5"
                d="M17 8H18.5"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
              ></path>
              <path
                opacity="0.5"
                d="M10 15H14"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
              ></path>
              <path
                d="M12 9V5"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
              <path
                d="M14 7L10 7"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
            </g>
          </svg>

          <h1 class="sitename">DIKLAT RSMS</h1>
        </a>

        <nav id="navmenu" class="navmenu">
          <ul>
            <li><a href="index.html">Home</a></li>
            <li class="dropdown">
              <a href="#"
                ><span>Pelatihan</span>
                <i class="bi bi-chevron-down toggle-dropdown"></i
              ></a>
              <ul>
                <li><a href="menupelatihan.html">Menu Pelatihan</a></li>
                <li><a href="kalender.html">Kalender Pelatihan</a></li>
                <li><a href="daftarpelatihan.html" class="active">Daftar Pelatihan</a></li>
                <li><a href="alurpendaftaran.html">Alur Pendaftaran</a></li>
                <li><a href="gallery.html">Gallery</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#"
                ><span>Tim & Mitra Pelatihan</span>
                <i class="bi bi-chevron-down toggle-dropdown"></i
              ></a>
              <ul>
                <li>
                  <a href="fasilitator.html">Profesional Fasilitor dan Instuktur Tersertifikasi</a>
                </li>
                <!-- <li>
                  <a href="instruktur.html">Instuktur Tersertifikasi</a>
                </li> -->
                <li>
                  <a href="penyelenggara.html"
                    >Tim Penyelenggara Pelatihan Tersertifikasi</a
                  >
                </li>
                <li><a href="intitusi.html">Institusi Kerjasama</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#"
                ><span>Tentang Kami</span>
                <i class="bi bi-chevron-down toggle-dropdown"></i
              ></a>
              <ul>
                <li><a href="profil.html">Profil Diklat</a></li>
                <li><a href="struktur_organisasi.html">Struktur Organisasi</a></li>
                <li><a href="contact.html">Kontak</a></li>
              </ul>
            </li>
            <li><a href="kritiksaran.html">Kritik Saran</a></li>
            <li class="ms-lg-3">
              <a
                href="daftarpelatihan.html"
                class="btn btn-accent nav-cta"
              >
                Daftar Pelatihan
              </a>
            </li>

          </ul>
          <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
        </nav>

      </div>
    </header>

  <main class="main">

    <!-- ======= PAGE TITLE ======= -->
    <div class="page-title">
      <div class="title-wrapper">
        <h1>KRITIK DAN SARAN</h1>
        <p>
          Kami sangat menghargai masukan Anda untuk meningkatkan kualitas
          pelaksanaan Diklat RSUD Prof. Dr. Margono Soekarjo.
        </p>
      </div>
    </div>

    <!-- ======= LIST KRITIK & SARAN (HALAMAN AWAL) ======= -->
    <section class="section">
    <div class="container" data-aos="fade-up">

        <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="mb-0">Kritik dan Saran:</h3>

        <!-- TOMBOL BUKA MODAL -->
        <button class="btn btn-accent" data-bs-toggle="modal" data-bs-target="#modalKritik">
            Kirim Kritik dan Saran
        </button>
        </div>

        <div id="listKritik"></div>

    </div>
    </section>


  </main>

  <!-- ======= FOOTER ======= -->
  <footer id="footer" class="footer position-relative light-background mt-5">

    <div class="container footer-top">
      <div class="row gy-4">
        <div class="col-lg-4 col-md-6 footer-about">
          <a href="index.html" class="logo d-flex align-items-center">
            <span class="sitename">DIKLAT RSMS</span>
          </a>
          <div class="footer-contact pt-3">
            <p>Jl. Dr. Gumbreg No.1, Kebontebu, Berkoh, </p>
            <p>Kec. Purwokerto Sel., Kabupaten Banyumas,</p>
            <p>Jawa Tengah 53146</p>
            <p class="mt-3"><strong>Phone:</strong> <span>(0281) 632704</span></p>
            <p><strong>Email:</strong> <span>rsmargono@jatengprov.go.id</span></p>
          </div>
          <div class="social-links d-flex mt-4">
            <a href="https://x.com/rsudmargono"><i class="bi bi-twitter-x"></i></a>
            <a href="https://www.facebook.com/RSMargono/"><i class="bi bi-facebook"></i></a>
            <a href="https://www.instagram.com/rsudmargono/"><i class="bi bi-instagram"></i></a>
            <a href="https://www.youtube.com/@rsmargono"><i class="bi bi-youtube"></i></a>
          </div>
        </div>

        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Useful Links</h4>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="contact.html">Kontak</a></li>
            <li><a href="gallery.html">Gallery</a></li>
          </ul>
        </div>

        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Pelatihan</h4>
          <ul>
            <li><a href="menupelatihan.html">Menu Pelatihan</a></li>
            <li><a href="daftarpelatihan.html">Daftar Pelatihan</a></li>
            <li><a href="kalender.html">Kalender Pelatihan</a></li>
            <li><a href="alurpendaftaran.html">Alur Pendaftaran</a></li>
          </ul>
        </div>

        <div class="col-lg-4 col-md-3 footer-links">
          <h4>Tim & Mitra Pelatihan</h4>
          <ul>
            <li><a href="fasilitator.html">Profesional Fasilitor dan Instruktur</a></li>
            <li><a href="penyelenggara.html">Tim Penyelenggara Pelatihan</a></li>
            <li><a href="instruktur.html">Institusi Kerjasama</a></li>
          </ul>
        </div>

      </div>
    </div>

    <div class="container copyright text-center mt-4">
      <p>© <span>Copyright</span> <strong class="px-1 sitename">RSUD Prof. Dr. Margono Soekarjo</strong></p>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you've purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: [buy-url] -->
        <!-- Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a> -->
      </div>
    </div>

  </footer>

  <!-- ======= JS ======= -->
  <script src="assets/vendor/aos/aos.js"></script>
  <script>AOS.init();</script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {

      const API = "http://localhost:5000/api/kritik-saran";

      // =====================
      // ELEMENT
      // =====================
      const form       = document.getElementById("formKritik");
      const chkAnonim  = document.getElementById("anonim");
      const inputNama  = document.getElementById("nama_lengkap");
      const btnSubmit  = document.getElementById("btnKirimKritik");

      // =====================
      // MODAL INSTANCE (SAMA POLA DENGAN DAFTAR PELATIHAN)
      // =====================
      const modalKritik = new bootstrap.Modal(
        document.getElementById("modalKritik")
      );
      const modalNama = new bootstrap.Modal(
        document.getElementById("modalNamaWajib")
      );
      const modalTerima = new bootstrap.Modal(
        document.getElementById("modalTerimaKasih")
      );

      // =====================
      // LOAD KRITIK
      // =====================
      async function loadKritik() {
        const res = await fetch(API);
        const data = await res.json();

        const box = document.getElementById("listKritik");
        box.innerHTML = "";

        if (!data.length) {
          box.innerHTML = `<p class="text-muted">Belum ada kritik & saran.</p>`;
          return;
        }

        data.forEach(item => {
          box.innerHTML += `
            <div class="card mb-3">
              <div class="card-body">
                <p><b>Nama Lengkap:</b> ${item.nama_lengkap ?? "Anonim"}</p>
                <p><b>No HP:</b> ${item.no_hp}</p>
                <hr>
                <p><b>Kritik:</b> ${item.kritik}</p>
                <p><b>Saran:</b> ${item.saran}</p>
              </div>
            </div>
          `;
        });
      }

      loadKritik();

      // =====================
      // TOGGLE ANONIM
      // =====================
      chkAnonim.addEventListener("change", () => {
        if (chkAnonim.checked) {
          inputNama.value = "Anonim";
          inputNama.disabled = true;
          inputNama.removeAttribute("required");
        } else {
          inputNama.value = "";
          inputNama.disabled = false;
          inputNama.setAttribute("required", true);
        }
      });

      // =====================
      // CAPTCHA
      // =====================
      let captchaResult = 0;

      function generateCaptcha() {
        const a = Math.floor(Math.random() * 9) + 1;
        const b = Math.floor(Math.random() * 9) + 1;
        captchaResult = a + b;
        document.getElementById("captchaQuestion").innerText = `${a} + ${b} = ?`;
      }

      generateCaptcha();

      // =====================
      // SUBMIT (POLA DAFTAR PELATIHAN)
      // =====================
      btnSubmit.addEventListener("click", async () => {

        const captchaInput = document.getElementById("captchaAnswer").value;

        if (+captchaInput !== captchaResult) {
          alert("Jawaban captcha salah.");
          generateCaptcha();
          return;
        }

        if (!chkAnonim.checked && inputNama.value.trim() === "") {
          modalNama.show();
          return;
        }

        const payload = {
          nama_lengkap: chkAnonim.checked ? null : inputNama.value.trim(),
          is_anonim: chkAnonim.checked ? "Y" : "N",
          no_hp: document.getElementById("no_hp").value,
          kritik: document.getElementById("kritik").value,
          saran: document.getElementById("saran").value
        };

        try {
          await fetch(API, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
          });

          // ✔ RESET FORM
          form.reset();
          inputNama.disabled = false;
          inputNama.setAttribute("required", true);
          generateCaptcha();

          // ✔ TUTUP → BUKA (TANPA EVENT hidden)
          modalKritik.hide();
          modalKritik._element.addEventListener(
            "hidden.bs.modal",
            () => {
              modalTerima.show();
            },
            { once: true }
          );

          loadKritik();

        } catch (err) {
          alert("Gagal mengirim kritik & saran.");
        }
      });

    });
</script>


  <!-- ================= MODAL KRITIK & SARAN ================= -->
    <div class="modal fade" id="modalKritik" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">

        <div class="modal-header bg-btn btn-accent text-white">
            <h5 class="modal-title">Kirim Kritik & Saran</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
            <form id="formKritik">

            <div class="mb-3">
                <label class="form-label">Nama Lengkap</label>
                <input
                    type="text"
                    id="nama_lengkap"
                    class="form-control"
                    required
                />

                <small class="text-danger">
                    *Pastikan mengisi Nama Lengkap ketika tidak mengirim sebagai Anonim
                </small>
            </div>

            <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" id="anonim">
                <label class="form-check-label">
                Kirim sebagai Anonim
                </label>
            </div>

            <div class="mb-3">
                <label class="form-label">Nomor HP</label>
                <input type="number" id="no_hp" class="form-control" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Kritik</label>
                <textarea id="kritik" class="form-control" rows="3" required></textarea>
            </div>

            <div class="mb-3">
                <label class="form-label">Saran</label>
                <textarea id="saran" class="form-control" rows="3" required></textarea>
            </div>

            <div id="notif"></div>

            <!-- Captcha -->
            <div class="mb-3 mt-3">
            <label class="form-label">
                Captcha
            </label>
            <div class="d-flex align-items-center gap-2">
                <span id="captchaQuestion" class="fw-bold"></span>
                <input
                type="number"
                id="captchaAnswer"
                class="form-control"
                placeholder="Jawaban"
                required
                style="max-width: 120px;"
                />
            </div>
            <small class="text-muted">
                *Memastikan bahwa Anda bukan bot
            </small>
        </div>

            </form>
        </div>

        <div class="modal-footer">
            <button class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
            <button type="button" class="btn btn-accent" id="btnKirimKritik">
            Kirim
            </button>
        </div>

        </div>
    </div>
    </div>

    <!-- ================= MODAL VALIDASI NAMA ================= -->
    <div class="modal fade" id="modalNamaWajib" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

        <div class="modal-header bg-danger text-white">
            <h5 class="modal-title">Data Belum Lengkap</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
            <p>
            <b>Nama lengkap wajib diisi</b> apabila Anda <b> tidak memilih kirim sebagai Anonim</b>.
            </p>
        </div>

        <div class="modal-footer">
            <button class="btn btn-danger" data-bs-dismiss="modal">
            Oke, Saya Mengerti
            </button>
        </div>

        </div>
    </div>
    </div>

    <!-- ================= MODAL TERIMA KASIH ================= -->
    <div class="modal fade" id="modalTerimaKasih" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

        <div class="modal-header bg-success text-white">
            <h5 class="modal-title">Terima Kasih</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
            <p>
            Terima kasih atas kritik dan saran yang telah Anda sampaikan.
            </p>
            <p>
            Masukan Anda sangat berarti bagi peningkatan kualitas pelaksanaan Diklat RSUD Prof. Dr. Margono Soekarjo Purwokerto.
            </p>
        </div>

        <div class="modal-footer">
            <button class="btn btn-success" data-bs-dismiss="modal">
            Tutup
            </button>
        </div>

        </div>
    </div>
    </div>


  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>

  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>